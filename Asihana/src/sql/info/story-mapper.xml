<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

	<comment>
		story Mapper
	</comment>

	<entry key="countStory">
	SELECT
	      COUNT(*) COUNT
	 FROM
	      TB_STORY
	WHERE
	      STATUS = 'Y'
	</entry>
	
	<entry key="storyList">
	SELECT
		STORY_NO,
		STORY_TITLE,
		CREATE_DATE
	FROM
		(SELECT 
			S.STORY_NO STORY_NO,
			S.STORY_TITLE STORY_TITLE,
			S.CREATE_DATE CREATE_DATE,
			ROWNUM RNUM
		FROM
			(SELECT
				 STORY_NO,
			     STORY_TITLE,
			     TO_CHAR(STORY_DATE, 'YYYY/MM/DD') CREATE_DATE
			  FROM
			    TB_STORY
			 WHERE
			    STATUS = 'Y'
		     ORDER
		        BY
		          STORY_NO DESC) S)
     WHERE
     	 RNUM BETWEEN ? AND ?
	</entry>

	<entry key="detailStory">
	
	SELECT
		 STORY_NO,
		 STORY_TITLE,
		 STORY_CN,
		 TO_CHAR(STORY_DATE, 'YYYY/MM/DD') STORY_DATE,
		 STORY_FROM
	 FROM
	 	 TB_STORY
 	WHERE
 		 STORY_NO = ?
	  AND
	  	 STATUS = 'Y'
	
	</entry>


	<entry key="selectTitlePhoto">
	SELECT
		  BOARD_TYPE,
	      FILE_NO,
	      FILE_PATH,
	      ORIGIN_NAME,
	      CHANGE_NAME
	  FROM
	      TB_FILE
	 WHERE      
	      BOARD_TYPE = 9
	   AND
	      BOARD_NO = ?
	</entry>
	
		<entry key="selectPhoto">
	SELECT
		  BOARD_TYPE,
	      FILE_NO,
	      FILE_PATH,
	      ORIGIN_NAME,
	      CHANGE_NAME
	  FROM
	      TB_FILE
	 WHERE      
	      BOARD_TYPE = 1
	   AND
	      BOARD_NO = ?
	</entry>
	
	<entry key="insertTitlePhoto">
		INSERT 
		  INTO
		      TB_FILE
		      (
		      FILE_NO,
		      BOARD_NO,
		      FILE_PATH,
		      ORIGIN_NAME,
		      CHANGE_NAME,
		      BOARD_TYPE
		      )
		VALUES
		     (
		     SEQ_FILE.NEXTVAL,
		     ?,
		     ?,
		     ?,
		     ?,
		     9     
		     )
	</entry>
	
	<entry key="insertPhoto">
		INSERT 
		  INTO
		      TB_FILE
		      (
		      FILE_NO,
		      BOARD_NO,
		      FILE_PATH,
		      ORIGIN_NAME,
		      CHANGE_NAME,
		      BOARD_TYPE
		      )
		VALUES
		     (
		     SEQ_FILE.NEXTVAL,
		     ?,
		     ?,
		     ?,
		     ?,
		     1     
		     )
	</entry>
	
	<entry key="updateTitlePhoto">
	UPDATE
	     TB_FILE
	  SET
	     FILE_PATH = ?,
	     ORIGIN_NAME = ?,
	     CHANGE_NAME = ?
	WHERE
	     BOARD_TYPE = 9
	  AND
	     BOARD_NO = ?
	</entry>
	
	<entry key="updatePhoto">
	UPDATE
	     TB_FILE
	  SET
	     FILE_PATH = ?,
	     ORIGIN_NAME = ?,
	     CHANGE_NAME = ?
	WHERE
	     BOARD_TYPE = 1
	  AND
	     BOARD_NO = ?
	</entry>
	
	<entry key="insertStory">
	INSERT
	  INTO
	     TB_STORY
	     (
	     STORY_NO,
	     STORY_TITLE,
	     STORY_CN,
	     STORY_DATE,
	     STORY_FROM
	     )
	VALUES
	    (
	    SEQ_ST.NEXTVAL,
	    ?,
	    ?,
	    SYSDATE,
	    ? 
	    )
	</entry>
	
	<entry key="insertFile">
	INSERT
	  INTO
	      TB_FILE
	      (
	      FILE_NO,
	      BOARD_NO,
	      FILE_PATH,
	      ORIGIN_NAME,
	      CHANGE_NAME,
	      BOARD_TYPE
	      )    
	VALUES
	     (
	     SEQ_FILE.NEXTVAL,
	     SEQ_ST.CURRVAL,
	     ?,
	     ?,
	     ?,
	     7
	     )
	</entry>

	
</properties>